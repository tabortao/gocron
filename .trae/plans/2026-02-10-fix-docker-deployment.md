# 修复 Docker 部署问题计划

## 任务目标

解决用户在 NAS 上部署 Docker 失败的问题，整合前后端到一个 Docker 镜像中，并确保端口配置正确。

## 分析与排查

1.  [ ] 分析现有的 `Dockerfile` 和 `docker-compose.yml`。
2.  [ ] 检查前端构建流程（`web/vue` 目录）和后端静态资源服务配置。
3.  [ ] 确认前后端是否可以在同一个容器中运行（通常通过后端 Go 服务托管前端静态文件）。

## 实施步骤

1.  [ ] **修改 Dockerfile**：
    - 使用多阶段构建：第一阶段构建前端（Node.js），第二阶段构建后端（Go），第三阶段合并。
    - 确保前端构建产物（`dist`）被复制到后端静态资源目录。
    - 配置后端服务以服务静态文件。
2.  [ ] **调整启动配置**：
    - 检查 `app.ini` 或环境变量，确保监听端口与 Docker 暴露端口一致。
    - 设置正确的 `WORKDIR` 和 `ENTRYPOINT`。
3.  [ ] **更新 docker-compose.yml**（如果需要）：
    - 简化部署配置，只需启动一个服务即可同时提供前后端功能。

## 验证

1.  [ ] 检查 Dockerfile 语法和逻辑。
2.  [ ] 提供构建和运行命令供用户测试。
